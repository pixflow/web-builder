(function(){var options={};function gridResizer(option){var defaultOptions={selector:".grid-resizable",minHeight:0,maxHeight:5e3,minWidth:0,maxWidth:5e3,snapToGrid:false,direction:"x",gridPrefix:"col-md"};for(i in defaultOptions){options[i]=option[i]||defaultOptions[i]}var els=document.querySelectorAll(options.selector);if(null==els){return false}init(els);return els}function init(els){for(var i=0;i<els.length;i++){var el=els[i];if(options.snapToGrid){if(isLastElement(el)){continue}checkPaddingsToPreventLineBreaks(el)}createHandlers(el)}return els}function checkPaddingsToPreventLineBreaks(el){var oldWidth=el.style.width;var oldMaxWidth=el.style.maxWidth;var oldFlexBasis=el.style.flexBasis;el.style.width="0px";el.style.maxWidth="0px";el.style.flexBasis="0px";if(el.offsetWidth>options.min){options.min=el.offsetWidth}el.style.width=oldWidth;el.style.maxWidth=oldMaxWidth;el.style.flexBasis=oldFlexBasis;return true}function createHandlers(el){var handler=document.createElement("div");handler.style.position="absolute";handler.style.top="0";handler.style.right="0";handler.style.height="100%";handler.style.width="5px";handler.style.cursor="col-resize";handler.setAttribute("class","resize-handler");el.appendChild(handler);handler.addEventListener("mousedown",initDrag,false);return true}function isLastElement(el){nextElement=findNextSibling(el);if(!nextElement){return true}return false}function initDrag(e){var el=this.parentNode,nextElement=findNextSibling(el);el.classList.add("resize-dragging");document.body.classList.add("grid-resizer-noselect");if(options.direction=="x"||options.direction=="both"){el.dataset.originalWidth=el.offsetWidth-1;el.dataset.originalX=el.offsetLeft;if(options.snapToGrid){nextElement.dataset.originalWidth=nextElement.offsetWidth;nextElement.dataset.originalX=nextElement.offsetLeft}}if((options.direction=="y"||options.direction=="both")&&!options.snapToGrid){el.dataset.originalHeight=el.offsetHeight-1;el.dataset.originalY=el.offsetTop}document.documentElement.addEventListener("mousemove",doDrag,false);document.documentElement.addEventListener("mouseup",stopDrag,false);return true}function doDrag(e){var el=document.querySelector(".resize-dragging");if(options.direction=="x"||options.direction=="both"){var newWidth=e.pageX-el.dataset.originalX;if(newWidth>=options.minWidth&&newWidth<=options.maxWidth&&e.pageX<document.documentElement.offsetWidth-options.minWidth){if(options.snapToGrid){var nextElement=findNextSibling(el);var nextElementNewWidth=parseInt(nextElement.dataset.originalWidth)+parseInt(el.dataset.originalWidth)-newWidth;if(nextElementNewWidth>=options.minWidth&&nextElementNewWidth<=options.maxWidth){nextElementWidth=nextElementNewWidth;nextElement.style.width=nextElementWidth+"px";nextElement.style.maxWidth=nextElementWidth+"px";nextElement.style.flexBasis=nextElementWidth+"px";el.style.width=newWidth+"px";el.style.maxWidth=newWidth+"px";el.style.flexBasis=newWidth+"px"}}else{el.style.width=newWidth+"px";el.style.maxWidth=newWidth+"px";el.style.flexBasis=newWidth+"px"}}}if((options.direction=="y"||options.direction=="both")&&!options.snapToGrid){var newHeight=e.pageY-el.dataset.originalY;if(newHeight>=options.minHeight&&newHeight<=options.maxHeight&&e.pageY<document.documentElement.offsetHeight-options.minHeight){el.style.height=newHeight+"px"}}return true}function findNextSibling(el){var nextElement=el;while(nextElement.nextSibling&&(!nextElement.nextSibling.classList||!nextElement.nextSibling.classList.contains(options.selector))){nextElement=nextElement.nextSibling;break}return nextElement.nextSibling}function stopDrag(e){var el=document.querySelector(".resize-dragging"),nextElement=findNextSibling(el);el.classList.remove("resize-dragging");document.body.classList.remove("grid-resizer-noselect");document.documentElement.removeEventListener("mousemove",doDrag,false);document.documentElement.removeEventListener("mouseup",stopDrag,false);if(true==options.snapToGrid){updateGrid(el)}if(options.direction=="x"||options.direction=="both"){el.removeAttribute("data-original-width");el.removeAttribute("data-original-x");if(options.snapToGrid){nextElement.removeAttribute("data-original-width");nextElement.removeAttribute("data-original-x")}}if((options.direction=="y"||options.direction=="both")&&!options.snapToGrid){el.removeAttribute("data-original-height");el.removeAttribute("data-original-y")}return true}function updateGrid(el){var nextElement=findNextSibling(el),elWidth=el.offsetWidth,nextElementWidth=nextElement.offsetWidth,oneColumnSize;el.style.width="";el.style.flexBasis="";el.style.maxWidth="";nextElement.style.width="";nextElement.style.flexBasis="";nextElement.style.maxWidth="";oneColumnSize=el.parentNode.offsetWidth*8.333/100;elColumnWidth=Math.round(elWidth/oneColumnSize);nextElementColumnWidth=Math.round(nextElementWidth/oneColumnSize);if(0===elColumnWidth){elColumnWidth=1;nextElementColumnWidth--}if(0===nextElementColumnWidth){nextElementColumnWidth=1;elColumnWidth--}var regex=new RegExp("(?:^|.)"+options.gridPrefix+"-([0-9]+)(?!S)","ig");el.className=el.className.replace(regex," "+options.gridPrefix+"-"+elColumnWidth+" ");nextElement.className=nextElement.className.replace(regex," "+options.gridPrefix+"-"+nextElementColumnWidth+" ");return true}window.gridResizer=gridResizer})();