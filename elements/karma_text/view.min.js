(function($,karmaBuilder){karmaBuilder.text=karmaBuilder.shortcodes.extend({events:{"blur .karma-text-content":"saveContent"},initialize:function(options){karmaBuilder.text.__super__.initialize.apply(this,arguments);this.options=options;if(this.options.renderStatus){this.render()}},render:function(){var source=this.template(this.model.get("shortcode_attributes"));this.el.innerHTML=source},saveContent:function(){var content=this.el.querySelector(".karma-text-content").innerHTML;this.setAttributes({content:content},true)},tag:function(){var element=this.el.querySelector(".karma-text-tag"),tagAttr=this.getAttributes(["tag"]),newTag=document.createElement(tagAttr.tag);newTag.innerHTML=element.innerHTML;newTag.classList.add("karma-text-tag");element.parentNode.replaceChild(newTag,element)}})})(jQuery,karmaBuilder);