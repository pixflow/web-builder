(function($,karmaBuilder){karmaBuilder.button=karmaBuilder.shortcodes.extend({events:{"keyup .karma-button-link":"checkEmptyLink","click .karma-button-link":"titleLink","blur  .karma-button-link ":"saveTitleLink","keypress .karma-button-link":"deactiveEnter"},initialize:function(options){karmaBuilder.button.__super__.initialize.apply(this,arguments);this.options=options;if(this.options.renderStatus){this.render()}this.el.querySelector(".karma-button-link span").contentEditable=true},render:function(){var source=this.template(this.model);this.el.querySelector(".karma-element-content").innerHTML=source},deactiveEnter:function(e){return e.which!=13},checkEmptyLink:function(){var content=this.el.querySelector(".karma-button-link"),contentData=content.innerHTML;if(""==contentData.trim()){content.innerText="";this.el.querySelector(".karma-button-link-shape").style.display="none"}this.setAttributes({linkcontent:contentData},true)},titleLink:function(e){e.preventDefault();e.stopPropagation();var content=this.el.querySelector(".karma-button-link span");if(null!=content){if(document.body.classList.contains("karma-device-mode-desktop")){content.focus()}}this.showElementGizmo(e)},saveTitleLink:function(){var content=this.el.querySelector(".karma-button-link span"),contentData=this.el.querySelector(".karma-button-link span").innerHTML;if(""==contentData.trim()){content.innerText=""}this.setAttributes({linkcontent:contentData},true)},generalcolor:function(){var elementId=this.elementSelector(),colorValue=this.getAttributes(["generalcolor"]);this.renderCss("#"+elementId+" .karma-button-container.karma-button-fill","background-color",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-button-outline .karma-button-link span","color",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-button-container.karma-button-outline","border-color",colorValue.generalcolor);this.renderCss("#"+this.elementSelector()+" .karma-button-container.karma-button-fill","border-color",colorValue.generalcolor)},textcolor:function(){var elementId=this.elementSelector(),colorValue=this.getAttributes(["textcolor"]);this.renderCss("#"+elementId+" .karma-button-fill .karma-button-link span","color",colorValue.textcolor)},rangemodel:function(){var elementId=this.elementSelector(),border=this.getAttributes(["rangemodel"]);this.renderCss("#"+elementId+" .karma-button-container","border-radius",border.rangemodel+"px")},linkurl:function(){var elementId=this.$el,linkValue=this.getAttributes(["linkurl"]);elementId.find(".karma-button-link").attr("href",linkValue.linkurl)},target:function(){var elementId=this.$el,linktarget=this.getAttributes(["target"]);elementId.find(".karma-button-link").attr("target",linktarget.target)},backgroundcolor:function(){var elementId=this.elementSelector();this.renderCss("#"+elementId+" .karma-button","background-color",this.getAttributes(["backgroundcolor"]).backgroundcolor)},type:function(){if("outline"==this.getAttributes(["type"]).type){this.$el.find(".karma-button-container").removeClass("karma-button-fill").addClass("karma-button-outline")}else{this.$el.find(".karma-button-container").addClass("karma-button-fill").removeClass("karma-button-outline");this.renderCss("#"+this.elementSelector()+" .karma-button-container.karma-button-fill","border-color",this.getAttributes(["generalcolor"]).generalcolor)}}})})(jQuery,karmaBuilder);