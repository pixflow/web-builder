(function($,karmaBuilder){karmaBuilder.column=karmaBuilder.shortcodes.extend({events:{click:"activeColumn"},initialize:function(options){karmaBuilder.section.__super__.initialize.apply(this,arguments);this.liveChangeGrid()},activeColumn:function(e){if(this.$el.hasClass("karma-active-column")){return}$(".karma-active-column").removeClass("karma-active-column");this.$el.addClass("karma-active-column")},rightSpace:function(){var elementId=this.el.getAttribute("data-name").replace("_","-")+"-"+this.el.getAttribute("data-element-key"),padding=this.model.attributes.shortcode_attributes.space+"px";document.getElementById(elementId).innerHTML="."+elementId+"{ padding-right: "+padding+";}"},extraClass:function(){var elementClass=this.model.get("shortcode_name").replace("_","-")+"-"+this.model.attributes.shortcode_attributes.element_key,defaultClasses=elementClass+" karma-column  "+this.model.attributes.shortcode_attributes.extraClass;this.el.firstElementChild.setAttribute("class",defaultClasses)},liveChangeGrid:function(){var that=this,key=this.model.get("element_key");var changeGridOptions={selector:'.karma-builder-element[data-element-key="'+key+'"]',snapToGrid:true,gridPrefix:"karma-col-md",onStop:function(result){var newGrid=result.grid;that.newGrid(newGrid)}};gridResizer(changeGridOptions)},newGrid:function(newGrid){var newLayout=this.$el.parent().backboneView().currentGrid();newLayout[newGrid.currentColumnIndex]=newGrid.currentColumnWidth;newLayout[newGrid.nextColumnIndex]=newGrid.nextColumnWidth;this.$el.parent().backboneView().changeRowLayout(newLayout)}})})(jQuery,karmaBuilder);