(function($,karmaBuilder){karmaBuilder.videobox=karmaBuilder.shortcodes.extend({events:{"blur .karma-video-box-title-tag ":"saveVideoTitle","blur .karma-video-box-description-tag":"saveVideoDescription","keyup .karma-video-box-link-tag":"saveVideoLink","click .karma-video-box-title":"titleEditable","click .karma-video-box-description":"titleDescription","click .karma-video-box-link":"titleLink","keypress .karma-video-box-link":"deactiveEnter"},initialize:function(options){karmaBuilder.videobox.__super__.initialize.apply(this,arguments);this.options=options;if(this.options.renderStatus){this.render()}},saveVideoDescription:function(){var content=this.el.querySelector(".karma-video-box-description-tag"),contentData=content.innerHTML;if(""==contentData.trim()){content.innerText="this is description..."}this.setAttributes({descriptiontext:contentData},true)},deactiveEnter:function(e){return e.which!=13},saveVideoTitle:function(){var content=this.el.querySelector(".karma-video-box-title-tag"),contentData=this.el.querySelector(".karma-video-box-title-tag").innerHTML;if(""==contentData.trim()){content.innerText="this is title..."}this.setAttributes({titletext:contentData},true)},saveVideoLink:function(){var content=this.el.querySelector(".karma-video-box-link-tag"),contentData=content.innerHTML;if(""==contentData.trim()){content.innerText="";this.el.querySelector(".karma-video-box-link-shape").style.display="none"}else{this.el.querySelector(".karma-video-box-link-shape").style.display="block"}this.setAttributes({linktext:contentData},true)},render:function(){var source=this.template(this.model);this.el.querySelector(".karma-element-content").innerHTML=source;this.openVideoPopup()},openVideoPopup:function(){var that=this;$(".karma-video-box-player").off("click.openVideoPanel").on("click.openVideoPanel",function(){new karmaVideoPopup("#karma-video-box-"+that.el.dataset.elementKey+" .karma-video-box")})},videourl:function(){var defaultClasses=this.model.attributes.shortcode_attributes.videourl;this.el.querySelector(".karma-video-box").setAttribute("data-url",defaultClasses)},titleEditable:function(){var content=this.el.querySelector(".karma-video-box-title-tag");if(null!=content){content.contentEditable=true;content.focus()}},titleDescription:function(){var content=this.el.querySelector(".karma-video-box-description-tag");if(null!=content){content.contentEditable=true;content.focus()}},titleLink:function(e){e.preventDefault();var content=this.el.querySelector(".karma-video-box-link-tag");if(null!=content){content.contentEditable=true;content.focus()}},imgurl:function(){var imageAddress=this.getAttributes(["imgurl"]),elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key");this.renderCss("#"+elementId+" .karma-video-box","background-image","url("+imageAddress.imgurl+")")},titlecolor:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),colorValue=this.getAttributes(["titlecolor"]);this.renderCss("#"+elementId+" .karma-video-box-title .karma-video-box-title-tag","color",colorValue.titlecolor)},descriptioncolor:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),colorValue=this.getAttributes(["descriptioncolor"]);this.renderCss("#"+elementId+" .karma-video-box-description .karma-video-box-description-tag","color",colorValue.descriptioncolor);this.renderCss("#"+elementId+" .karma-video-box-player svg * ","fill",colorValue.descriptioncolor)},textlink:function(){var elementId=this.$el,linkValue=this.getAttributes(["textlink"]);elementId.find(".karma-video-box-link-tag ").attr("href",linkValue.textlink)},target:function(){var elementId=this.$el,linktarget=this.getAttributes(["target"]);elementId.find(".karma-video-box-link-tag ").attr("target",linktarget.target)},titletag:function(){var element=this.el.querySelector(".karma-video-box-title-tag"),tagAttr=this.getAttributes(["titletag"]),newTag=document.createElement(tagAttr.titletag);newTag.innerHTML=element.innerHTML;newTag.classList.add("karma-video-box-title-tag");element.parentNode.replaceChild(newTag,element)},descriptiontag:function(){var element=this.el.querySelector(".karma-video-box-description-tag"),tagAttr=this.getAttributes(["descriptiontag"]),newTag=document.createElement(tagAttr.descriptiontag);newTag.innerHTML=element.innerHTML;newTag.classList.add("karma-video-box-description-tag");element.parentNode.replaceChild(newTag,element)},linktag:function(){var element=this.el.querySelector(".karma-video-box-link-tag"),tagAttr=this.getAttributes(["linktag"]),newTag=document.createElement(tagAttr.linktag);newTag.innerHTML=element.innerHTML;newTag.classList.add("karma-video-box-link-tag");element.parentNode.replaceChild(newTag,element)},textposition:function(){var dataValue=this.getAttributes(["textposition"]),regex=new RegExp("(?:^|\\s)karma-video-box-content-position-(.*?)(?!\\S)");this.el.querySelector(".karma-video-box").className=this.el.querySelector(".karma-video-box").className.replace(regex," karma-video-box-content-position-"+dataValue.textposition)},radiusbox:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),radiusBox=this.getAttributes(["radiusbox"]);this.renderCss("#"+elementId+" .karma-video-box","border-radius",radiusBox.radiusbox+"px");this.renderCss("#"+elementId+" .karma-video-box-overlay","border-radius",radiusBox.radiusbox+"px")},videoheight:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),videoHeight=this.getAttributes(["videoheight"]);this.renderCss("#"+elementId+" .karma-video-box ","height",videoHeight.videoheight+"px")},coloroverlay:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),colorValue=this.getAttributes(["coloroverlay"]);this.renderCss("#"+elementId+" .karma-video-box-overlay ","background-color",colorValue.coloroverlay)},colorbackground:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),colorValue=this.getAttributes(["colorbackground"]);this.renderCss("#"+elementId+" .karma-video-box ","background-color",colorValue.colorbackground)},type:function(){var className=this.getAttributes(["type"]).type;if("outline"==className){this.$el.find(".karma-video-box-link").removeClass("karma-button-fill karma-button-link").addClass("karma-button-outline")}else if("fill"==className){this.$el.find(".karma-video-box-link").addClass("karma-button-fill").removeClass("karma-button-outline karma-button-link")}else{this.$el.find(".karma-video-box-link").addClass("karma-button-link").removeClass("karma-button-outline karma-button-fill")}},rangemodel:function(){var elementId=this.el.getAttribute("data-name").replace(/_/g,"-")+"-"+this.el.getAttribute("data-element-key"),border=this.getAttributes(["rangemodel"]);this.renderCss("#"+elementId+" .karma-video-box-link","border-radius",border.rangemodel+"px")},textcolor:function(){var elementId=this.elementSelector(),colorValue=this.getAttributes(["textcolor"]);this.renderCss("#"+elementId+" .karma-button-fill .karma-video-box-link-tag ","color",colorValue.textcolor)},generalcolor:function(){var elementId=this.elementSelector(),colorValue=this.getAttributes(["generalcolor"]);this.renderCss("#"+elementId+" .karma-video-box-link.karma-button-fill","background-color",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-button-outline .karma-video-box-link-tag","color",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-video-box-link.karma-button-outline","border-color",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-video-box-link.karma-button-fill","border-color",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-video-box-link .karma-video-box-link-shape svg *","stroke",colorValue.generalcolor);this.renderCss("#"+elementId+" .karma-video-box-link.karma-button-link .karma-video-box-link-tag","color",colorValue.generalcolor)},visibleondesktop:function(){var desktopVisible=this.getAttributes(["visibleondesktop"]).visibleondesktop;if("on"==desktopVisible){this.el.querySelector(".karma-video-box-link").classList.remove("karma-deactive-on-desktop")}else{this.el.querySelector(".karma-video-box-link").classList.add("karma-deactive-on-desktop")}},visibleontablet:function(){var tabletVisible=this.getAttributes(["visibleontablet"]).visibleontablet;if("on"==tabletVisible){this.el.querySelector(".karma-video-box-link").classList.remove("karma-deactive-on-tablet")}else{this.el.querySelector(".karma-video-box-link").classList.add("karma-deactive-on-tablet")}},visibleonmobile:function(){var mobileVisible=this.getAttributes(["visibeonmobile"]).visibleonmobile;if("on"==mobileVisible){this.el.querySelector(".karma-video-box-link").classList.remove("karma-deactive-on-mobile")}else{this.el.querySelector(".karma-video-box-link").classList.add("karma-deactive-on-mobile")}}})})(jQuery,karmaBuilder);